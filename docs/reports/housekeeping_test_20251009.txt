/Users/aks/docling_langextract_testing/.venv/lib/python3.12/site-packages/RTFDE/transformers.py:231: SyntaxWarning: invalid escape sequence '\u'
  b'\\lquote': b'\u2018',
/Users/aks/docling_langextract_testing/.venv/lib/python3.12/site-packages/RTFDE/transformers.py:232: SyntaxWarning: invalid escape sequence '\u'
  b'\\rquote': b'\u2019',
/Users/aks/docling_langextract_testing/.venv/lib/python3.12/site-packages/RTFDE/transformers.py:233: SyntaxWarning: invalid escape sequence '\u'
  b'\\ldblquote': b'\u201C',
/Users/aks/docling_langextract_testing/.venv/lib/python3.12/site-packages/RTFDE/transformers.py:234: SyntaxWarning: invalid escape sequence '\u'
  b'\\rdblquote': b'\u201D',
/Users/aks/docling_langextract_testing/.venv/lib/python3.12/site-packages/RTFDE/transformers.py:235: SyntaxWarning: invalid escape sequence '\u'
  b'\\bullet': b'\u2022',
/Users/aks/docling_langextract_testing/.venv/lib/python3.12/site-packages/RTFDE/transformers.py:236: SyntaxWarning: invalid escape sequence '\u'
  b'\\endash': b'\u2013',
/Users/aks/docling_langextract_testing/.venv/lib/python3.12/site-packages/RTFDE/transformers.py:237: SyntaxWarning: invalid escape sequence '\u'
  b'\\emdash': b'\u2014'
2025-10-09 09:04:32,749 - INFO - ‚úÖ GEMINI_API_KEY validated for provider: langextract
2025-10-09 09:04:32,749 - INFO - üè≠ Building extractors: DOC=docling, EVENT=langextract
2025-10-09 09:04:32,750 - INFO - ‚úÖ Using Docling Parse V4 backend with StandardPdfPipeline for PDF
2025-10-09 09:04:32,753 - INFO - ‚úÖ DocumentProcessor initialized with config: OCR=False, Table=FAST, Device=cpu, Backend=default, Timeout=300s
2025-10-09 09:04:32,753 - INFO - ‚úÖ DoclingDocumentExtractor initialized
2025-10-09 09:04:32,753 - INFO - ‚úÖ Created DoclingDocumentExtractor
2025-10-09 09:04:32,753 - INFO - ‚úÖ GEMINI_API_KEY loaded successfully
2025-10-09 09:04:32,753 - INFO - ‚úÖ Created 3 legal events examples
2025-10-09 09:04:32,753 - INFO - ‚úÖ Loaded 3 examples from external module
2025-10-09 09:04:32,753 - INFO - ‚úÖ LangExtractEventExtractor initialized
2025-10-09 09:04:32,753 - INFO - ‚úÖ Created LangExtractEventExtractor
2025-10-09 09:04:32,754 - INFO - ‚úÖ Extractors validated: 7 file types supported
2025-10-09 09:04:32,754 - INFO - ‚úÖ Modular legal events pipeline initialized with pluggable adapters (doc:DoclingDocumentExtractor, event:LangExtractEventExtractor)
2025-10-09 09:04:32,755 - INFO - detected formats: [<InputFormat.HTML: 'html'>]
2025-10-09 09:04:32,756 - INFO - Going to convert document batch...
2025-10-09 09:04:32,757 - INFO - Initializing pipeline for SimplePipeline with options hash dcc07a927643cc75944f6fe86ea95625
2025-10-09 09:04:32,784 - INFO - Loading plugin 'docling_defaults'
2025-10-09 09:04:32,786 - INFO - Registered picture descriptions: ['vlm', 'api']
2025-10-09 09:04:32,787 - INFO - Processing document test_clear_dates.html
2025-10-09 09:04:32,788 - INFO - Finished converting document test_clear_dates.html in 0.03 sec.
2025-10-09 09:04:32,810 - INFO - ‚úÖ DOCLING SUCCESS: test_clear_dates.html
2025-10-09 09:04:32,810 - INFO - detected formats: [<InputFormat.HTML: 'html'>]
2025-10-09 09:04:32,811 - INFO - Going to convert document batch...
2025-10-09 09:04:32,811 - INFO - Processing document test_clear_dates.html
2025-10-09 09:04:32,812 - INFO - Finished converting document test_clear_dates.html in 0.00 sec.
2025-10-09 09:04:32,813 - WARNING - Parameter `strict_text` has been deprecated and will be ignored.
2025-10-09 09:04:32,813 - INFO - üîç Starting LangExtract call: Extract legal events from this document. For each event, you must return exactly four JSON keys:

1. "event_particulars" - REQUIRED: Provide a complete description (2-8 sentences as appropriate) of what happened, including relevant context, parties involved, procedural background, implications, and any important details. Use verbatim or paraphrased text from the document. NEVER leave this field empty.
2. "citation" - Exact legal authority cited in the event (statute, rule, case, docket, etc.). Copy the verbatim reference from the document. Use empty string "" when no explicit legal citation appears.
3. "document_reference" - Leave as empty string "" (will be filled automatically with source filename)
4. "date" - Specific date mentioned (use empty string "" if no date is found)

CRITICAL REQUIREMENTS:
- "event_particulars" must ALWAYS contain meaningful, comprehensive text - provide a full description with sufficient context for legal analysis
- Use 2-8 sentences as appropriate to capture the complete legal significance and context of each event
- Include relevant background, procedural details, party information, and implications when available in the document
- Use empty strings ("") for missing values EXCEPT for "event_particulars" which must never be empty
- The "citation" field should only contain actual legal references mentioned in the text
- Always use empty string "" for "document_reference" - the system will populate it with the correct filename
- Return all four keys for every extraction

PROHIBITION: Never return an extraction with blank or empty "event_particulars" - every event must have a comprehensive, contextual description.

Extract all legally significant events, proceedings, filings, agreements, and deadlines.
2025-10-09 09:04:32,813 - INFO - üìù Text length: 200 chars
2025-10-09 09:04:32,813 - INFO - üéØ Examples: 3
2025-10-09 09:04:32,816 - WARNING - Prompt alignment: FAILED to align: [example#0] class='legal_filing' status=None text='Plaintiff filed motion to dismiss on January 15, 2024'
2025-10-09 09:04:32,816 - WARNING - Prompt alignment: non-exact match: [example#1] class='contract_execution' status=AlignmentStatus.MATCH_LESSER text='Contract execution between ABC Corp and XYZ LLC on March 3, 2023' char_span=(4, 12)
2025-10-09 09:04:32,837 - INFO - Loaded provider plugin: gemini
2025-10-09 09:04:32,840 - INFO - Loaded provider plugin: ollama
2025-10-09 09:04:32,842 - INFO - Loaded provider plugin: openai
2025-10-09 09:04:34,705 - WARNING - Both GOOGLE_API_KEY and GEMINI_API_KEY are set. Using GOOGLE_API_KEY.
2025-10-09 09:04:34,865 - INFO - Starting document annotation.
üî¨ STARTING COMPREHENSIVE 5-COLUMN TABLE TEST SUITE
Mode: Quick
Report Generation: Enabled
================================================================================
üîç PRE-FLIGHT CHECKS
----------------------------------------
‚úÖ API key configured
‚úÖ Test documents available: 5
‚úÖ Core modules importable
‚úÖ Pre-flight checks passed

üß™ RUNNING ACCEPTANCE CRITERIA TESTS
============================================================
üß™ Starting User Acceptance Criteria Test Suite
============================================================
‚úÖ PASS AC-001: Column header validation - 5 columns in correct order
[94m[1mLangExtract[0m: model=[92mgemini-2.0-flash[0m [00:00]2025-10-09 09:04:34,886 - INFO - Processing batch 0 with length 1
2025-10-09 09:04:34,888 - INFO - AFC is enabled with max remote calls: 10.
2025-10-09 09:04:38,725 - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent "HTTP/1.1 200 OK"
2025-10-09 09:04:38,728 - INFO - AFC remote call 1 is done.
2025-10-09 09:04:38,728 - INFO - Starting resolver process for input text.
2025-10-09 09:04:38,728 - INFO - Starting to extract and order extractions from data.
2025-10-09 09:04:38,728 - INFO - Completed extraction and ordering of extractions.
2025-10-09 09:04:38,728 - INFO - Starting alignment process for provided chunk text.
2025-10-09 09:04:38,729 - INFO - Completed alignment process for the provided source_text.
[94m[1mLangExtract[0m: model=[92mgemini-2.0-flash[0m [00:03][94m[1mLangExtract[0m: model=[92mgemini-2.0-flash[0m [00:03]
2025-10-09 09:04:38,730 - INFO - Finalizing annotation for document ID doc_ec17c8ad.
2025-10-09 09:04:38,730 - INFO - Document annotation completed.
2025-10-09 09:04:38,734 - INFO - ‚úÖ LangExtract call successful
2025-10-09 09:04:38,734 - INFO - ‚úÖ Extracted 2 legal events from test_clear_dates.html
2025-10-09 09:04:38,734 - INFO - ‚è±Ô∏è  test_clear_dates.html: Docling=0.059s, Extractor=5.921s, Total=5.980s
2025-10-09 09:04:38,734 - INFO - ‚úÖ Extracted 2 events from test_clear_dates.html using adapters
2025-10-09 09:04:38,738 - INFO - ‚úÖ Normalized 2 records to standard format
2025-10-09 09:04:38,740 - INFO - ‚úÖ Pipeline completed successfully with 2 legal events [Pipeline-ID: DL2-LE1-TS1-F-20251009090432]
2025-10-09 09:04:38,744 - INFO - ‚úÖ GEMINI_API_KEY loaded successfully
2025-10-09 09:04:38,744 - INFO - ‚úÖ Created 3 legal events examples
2025-10-09 09:04:38,744 - INFO - ‚úÖ Loaded 3 examples from external module
2025-10-09 09:04:38,744 - INFO - ‚úÖ Legal events extractor initialized
2025-10-09 09:04:38,745 - INFO - detected formats: [<InputFormat.HTML: 'html'>]
2025-10-09 09:04:38,746 - INFO - Going to convert document batch...
2025-10-09 09:04:38,746 - INFO - Processing document test_no_dates.html
2025-10-09 09:04:38,747 - INFO - Finished converting document test_no_dates.html in 0.00 sec.
2025-10-09 09:04:38,748 - INFO - ‚úÖ DOCLING SUCCESS: test_no_dates.html
2025-10-09 09:04:38,748 - INFO - detected formats: [<InputFormat.HTML: 'html'>]
2025-10-09 09:04:38,749 - INFO - Going to convert document batch...
2025-10-09 09:04:38,749 - INFO - Processing document test_no_dates.html
2025-10-09 09:04:38,749 - INFO - Finished converting document test_no_dates.html in 0.00 sec.
2025-10-09 09:04:38,750 - WARNING - Parameter `strict_text` has been deprecated and will be ignored.
2025-10-09 09:04:38,750 - INFO - üîç Starting LangExtract call: Extract legal events from this document. For each event, you must return exactly four JSON keys:

1. "event_particulars" - REQUIRED: Provide a complete description (2-8 sentences as appropriate) of what happened, including relevant context, parties involved, procedural background, implications, and any important details. Use verbatim or paraphrased text from the document. NEVER leave this field empty.
2. "citation" - Exact legal authority cited in the event (statute, rule, case, docket, etc.). Copy the verbatim reference from the document. Use empty string "" when no explicit legal citation appears.
3. "document_reference" - Leave as empty string "" (will be filled automatically with source filename)
4. "date" - Specific date mentioned (use empty string "" if no date is found)

CRITICAL REQUIREMENTS:
- "event_particulars" must ALWAYS contain meaningful, comprehensive text - provide a full description with sufficient context for legal analysis
- Use 2-8 sentences as appropriate to capture the complete legal significance and context of each event
- Include relevant background, procedural details, party information, and implications when available in the document
- Use empty strings ("") for missing values EXCEPT for "event_particulars" which must never be empty
- The "citation" field should only contain actual legal references mentioned in the text
- Always use empty string "" for "document_reference" - the system will populate it with the correct filename
- Return all four keys for every extraction

PROHIBITION: Never return an extraction with blank or empty "event_particulars" - every event must have a comprehensive, contextual description.

Extract all legally significant events, proceedings, filings, agreements, and deadlines.
2025-10-09 09:04:38,750 - INFO - üìù Text length: 119 chars
2025-10-09 09:04:38,750 - INFO - üéØ Examples: 3
2025-10-09 09:04:38,754 - WARNING - Prompt alignment: FAILED to align: [example#0] class='legal_filing' status=None text='Plaintiff filed motion to dismiss on January 15, 2024'
2025-10-09 09:04:38,754 - WARNING - Prompt alignment: non-exact match: [example#1] class='contract_execution' status=AlignmentStatus.MATCH_LESSER text='Contract execution between ABC Corp and XYZ LLC on March 3, 2023' char_span=(4, 12)
2025-10-09 09:04:38,754 - WARNING - Both GOOGLE_API_KEY and GEMINI_API_KEY are set. Using GOOGLE_API_KEY.
2025-10-09 09:04:38,828 - INFO - Starting document annotation.
‚úÖ PASS AC-003: Valid date extraction from clear date text
‚úÖ PASS AC-004: Multiple date format support validation
[94m[1mLangExtract[0m: model=[92mgemini-2.0-flash[0m [00:00]2025-10-09 09:04:38,829 - INFO - Processing batch 0 with length 1
2025-10-09 09:04:38,829 - INFO - AFC is enabled with max remote calls: 10.
2025-10-09 09:04:40,259 - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent "HTTP/1.1 200 OK"
2025-10-09 09:04:40,260 - INFO - AFC remote call 1 is done.
2025-10-09 09:04:40,261 - INFO - Starting resolver process for input text.
2025-10-09 09:04:40,261 - INFO - Starting to extract and order extractions from data.
2025-10-09 09:04:40,261 - INFO - Completed extraction and ordering of extractions.
2025-10-09 09:04:40,261 - INFO - Starting alignment process for provided chunk text.
[94m[1mLangExtract[0m: model=[92mgemini-2.0-flash[0m [00:01][94m[1mLangExtract[0m: model=[92mgemini-2.0-flash[0m [00:01]
2025-10-09 09:04:40,261 - INFO - Finalizing annotation for document ID doc_4eb76ba5.
2025-10-09 09:04:40,261 - INFO - Document annotation completed.
2025-10-09 09:04:40,263 - INFO - ‚úÖ LangExtract call successful
2025-10-09 09:04:40,263 - WARNING - ‚ö†Ô∏è No events extracted from test_no_dates.html
2025-10-09 09:04:40,263 - INFO - ‚è±Ô∏è  test_no_dates.html: Docling=0.006s, Extractor=1.513s, Total=1.518s
2025-10-09 09:04:40,263 - INFO - ‚úÖ Extracted 1 events from test_no_dates.html using adapters
2025-10-09 09:04:40,265 - INFO - ‚úÖ Normalized 1 records to standard format
2025-10-09 09:04:40,267 - INFO - ‚úÖ Pipeline completed successfully with 1 legal events [Pipeline-ID: DL2-LE1-TS1-F-20251009090438]
2025-10-09 09:04:40,268 - INFO - detected formats: [<InputFormat.HTML: 'html'>]
2025-10-09 09:04:40,268 - INFO - Going to convert document batch...
2025-10-09 09:04:40,269 - INFO - Processing document test_format.html
2025-10-09 09:04:40,269 - INFO - Finished converting document test_format.html in 0.00 sec.
2025-10-09 09:04:40,269 - INFO - ‚úÖ DOCLING SUCCESS: test_format.html
2025-10-09 09:04:40,270 - INFO - detected formats: [<InputFormat.HTML: 'html'>]
2025-10-09 09:04:40,270 - INFO - Going to convert document batch...
2025-10-09 09:04:40,270 - INFO - Processing document test_format.html
2025-10-09 09:04:40,270 - INFO - Finished converting document test_format.html in 0.00 sec.
2025-10-09 09:04:40,271 - WARNING - Parameter `strict_text` has been deprecated and will be ignored.
2025-10-09 09:04:40,271 - INFO - üîç Starting LangExtract call: Extract legal events from this document. For each event, you must return exactly four JSON keys:

1. "event_particulars" - REQUIRED: Provide a complete description (2-8 sentences as appropriate) of what happened, including relevant context, parties involved, procedural background, implications, and any important details. Use verbatim or paraphrased text from the document. NEVER leave this field empty.
2. "citation" - Exact legal authority cited in the event (statute, rule, case, docket, etc.). Copy the verbatim reference from the document. Use empty string "" when no explicit legal citation appears.
3. "document_reference" - Leave as empty string "" (will be filled automatically with source filename)
4. "date" - Specific date mentioned (use empty string "" if no date is found)

CRITICAL REQUIREMENTS:
- "event_particulars" must ALWAYS contain meaningful, comprehensive text - provide a full description with sufficient context for legal analysis
- Use 2-8 sentences as appropriate to capture the complete legal significance and context of each event
- Include relevant background, procedural details, party information, and implications when available in the document
- Use empty strings ("") for missing values EXCEPT for "event_particulars" which must never be empty
- The "citation" field should only contain actual legal references mentioned in the text
- Always use empty string "" for "document_reference" - the system will populate it with the correct filename
- Return all four keys for every extraction

PROHIBITION: Never return an extraction with blank or empty "event_particulars" - every event must have a comprehensive, contextual description.

Extract all legally significant events, proceedings, filings, agreements, and deadlines.
2025-10-09 09:04:40,271 - INFO - üìù Text length: 67 chars
2025-10-09 09:04:40,271 - INFO - üéØ Examples: 3
2025-10-09 09:04:40,275 - WARNING - Prompt alignment: FAILED to align: [example#0] class='legal_filing' status=None text='Plaintiff filed motion to dismiss on January 15, 2024'
2025-10-09 09:04:40,275 - WARNING - Prompt alignment: non-exact match: [example#1] class='contract_execution' status=AlignmentStatus.MATCH_LESSER text='Contract execution between ABC Corp and XYZ LLC on March 3, 2023' char_span=(4, 12)
2025-10-09 09:04:40,275 - WARNING - Both GOOGLE_API_KEY and GEMINI_API_KEY are set. Using GOOGLE_API_KEY.
2025-10-09 09:04:40,350 - INFO - Starting document annotation.
‚úÖ PASS AC-005: Date fallback behavior for documents without dates
[94m[1mLangExtract[0m: model=[92mgemini-2.0-flash[0m [00:00]2025-10-09 09:04:40,350 - INFO - Processing batch 0 with length 1
2025-10-09 09:04:40,351 - INFO - AFC is enabled with max remote calls: 10.
2025-10-09 09:04:42,918 - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent "HTTP/1.1 200 OK"
2025-10-09 09:04:42,920 - INFO - AFC remote call 1 is done.
2025-10-09 09:04:42,920 - INFO - Starting resolver process for input text.
2025-10-09 09:04:42,920 - INFO - Starting to extract and order extractions from data.
2025-10-09 09:04:42,920 - INFO - Completed extraction and ordering of extractions.
2025-10-09 09:04:42,920 - INFO - Starting alignment process for provided chunk text.
2025-10-09 09:04:42,921 - INFO - Completed alignment process for the provided source_text.
[94m[1mLangExtract[0m: model=[92mgemini-2.0-flash[0m [00:02][94m[1mLangExtract[0m: model=[92mgemini-2.0-flash[0m [00:02]
2025-10-09 09:04:42,922 - INFO - Finalizing annotation for document ID doc_ed8b9136.
2025-10-09 09:04:42,922 - INFO - Document annotation completed.
2025-10-09 09:04:42,923 - INFO - ‚úÖ LangExtract call successful
2025-10-09 09:04:42,923 - INFO - ‚úÖ Extracted 1 legal events from test_format.html
2025-10-09 09:04:42,923 - INFO - ‚è±Ô∏è  test_format.html: Docling=0.004s, Extractor=2.652s, Total=2.656s
2025-10-09 09:04:42,923 - INFO - ‚úÖ Extracted 1 events from test_format.html using adapters
2025-10-09 09:04:42,926 - INFO - ‚úÖ Normalized 1 records to standard format
2025-10-09 09:04:42,927 - INFO - ‚úÖ Pipeline completed successfully with 1 legal events [Pipeline-ID: DL2-LE1-TS1-F-20251009090440]
2025-10-09 09:04:42,928 - INFO - detected formats: [<InputFormat.HTML: 'html'>]
2025-10-09 09:04:42,929 - INFO - Going to convert document batch...
2025-10-09 09:04:42,929 - INFO - Processing document test_sequential.html
2025-10-09 09:04:42,930 - INFO - Finished converting document test_sequential.html in 0.00 sec.
2025-10-09 09:04:42,930 - INFO - ‚úÖ DOCLING SUCCESS: test_sequential.html
2025-10-09 09:04:42,930 - INFO - detected formats: [<InputFormat.HTML: 'html'>]
2025-10-09 09:04:42,931 - INFO - Going to convert document batch...
2025-10-09 09:04:42,931 - INFO - Processing document test_sequential.html
2025-10-09 09:04:42,931 - INFO - Finished converting document test_sequential.html in 0.00 sec.
2025-10-09 09:04:42,932 - WARNING - Parameter `strict_text` has been deprecated and will be ignored.
2025-10-09 09:04:42,932 - INFO - üîç Starting LangExtract call: Extract legal events from this document. For each event, you must return exactly four JSON keys:

1. "event_particulars" - REQUIRED: Provide a complete description (2-8 sentences as appropriate) of what happened, including relevant context, parties involved, procedural background, implications, and any important details. Use verbatim or paraphrased text from the document. NEVER leave this field empty.
2. "citation" - Exact legal authority cited in the event (statute, rule, case, docket, etc.). Copy the verbatim reference from the document. Use empty string "" when no explicit legal citation appears.
3. "document_reference" - Leave as empty string "" (will be filled automatically with source filename)
4. "date" - Specific date mentioned (use empty string "" if no date is found)

CRITICAL REQUIREMENTS:
- "event_particulars" must ALWAYS contain meaningful, comprehensive text - provide a full description with sufficient context for legal analysis
- Use 2-8 sentences as appropriate to capture the complete legal significance and context of each event
- Include relevant background, procedural details, party information, and implications when available in the document
- Use empty strings ("") for missing values EXCEPT for "event_particulars" which must never be empty
- The "citation" field should only contain actual legal references mentioned in the text
- Always use empty string "" for "document_reference" - the system will populate it with the correct filename
- Return all four keys for every extraction

PROHIBITION: Never return an extraction with blank or empty "event_particulars" - every event must have a comprehensive, contextual description.

Extract all legally significant events, proceedings, filings, agreements, and deadlines.
2025-10-09 09:04:42,932 - INFO - üìù Text length: 196 chars
2025-10-09 09:04:42,932 - INFO - üéØ Examples: 3
2025-10-09 09:04:42,936 - WARNING - Prompt alignment: FAILED to align: [example#0] class='legal_filing' status=None text='Plaintiff filed motion to dismiss on January 15, 2024'
2025-10-09 09:04:42,936 - WARNING - Prompt alignment: non-exact match: [example#1] class='contract_execution' status=AlignmentStatus.MATCH_LESSER text='Contract execution between ABC Corp and XYZ LLC on March 3, 2023' char_span=(4, 12)
2025-10-09 09:04:42,936 - WARNING - Both GOOGLE_API_KEY and GEMINI_API_KEY are set. Using GOOGLE_API_KEY.
2025-10-09 09:04:43,012 - INFO - Starting document annotation.
‚úÖ PASS AC-007: DataFrame format validation for 5-column structure
[94m[1mLangExtract[0m: model=[92mgemini-2.0-flash[0m [00:00]2025-10-09 09:04:43,014 - INFO - Processing batch 0 with length 1
2025-10-09 09:04:43,014 - INFO - AFC is enabled with max remote calls: 10.
2025-10-09 09:04:48,028 - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent "HTTP/1.1 200 OK"
2025-10-09 09:04:48,029 - INFO - AFC remote call 1 is done.
2025-10-09 09:04:48,029 - INFO - Starting resolver process for input text.
2025-10-09 09:04:48,029 - INFO - Starting to extract and order extractions from data.
2025-10-09 09:04:48,029 - INFO - Completed extraction and ordering of extractions.
2025-10-09 09:04:48,029 - INFO - Starting alignment process for provided chunk text.
2025-10-09 09:04:48,030 - INFO - Completed alignment process for the provided source_text.
[94m[1mLangExtract[0m: model=[92mgemini-2.0-flash[0m [00:05][94m[1mLangExtract[0m: model=[92mgemini-2.0-flash[0m [00:05]
2025-10-09 09:04:48,030 - INFO - Finalizing annotation for document ID doc_03b20c0b.
2025-10-09 09:04:48,030 - INFO - Document annotation completed.
2025-10-09 09:04:48,032 - INFO - ‚úÖ LangExtract call successful
2025-10-09 09:04:48,032 - INFO - ‚úÖ Extracted 3 legal events from test_sequential.html
2025-10-09 09:04:48,032 - INFO - ‚è±Ô∏è  test_sequential.html: Docling=0.005s, Extractor=5.100s, Total=5.105s
2025-10-09 09:04:48,032 - INFO - ‚úÖ Extracted 3 events from test_sequential.html using adapters
2025-10-09 09:04:48,035 - INFO - ‚úÖ Normalized 3 records to standard format
2025-10-09 09:04:48,036 - INFO - ‚úÖ Pipeline completed successfully with 3 legal events [Pipeline-ID: DL2-LE1-TS1-F-20251009090442]
2025-10-09 09:04:48,036 - INFO - detected formats: [<InputFormat.HTML: 'html'>]
2025-10-09 09:04:48,037 - INFO - Going to convert document batch...
2025-10-09 09:04:48,037 - INFO - Processing document test_empty.html
2025-10-09 09:04:48,038 - INFO - Finished converting document test_empty.html in 0.00 sec.
2025-10-09 09:04:48,038 - INFO - ‚úÖ DOCLING SUCCESS: test_empty.html
2025-10-09 09:04:48,038 - INFO - detected formats: [<InputFormat.HTML: 'html'>]
2025-10-09 09:04:48,039 - INFO - Going to convert document batch...
2025-10-09 09:04:48,039 - INFO - Processing document test_empty.html
2025-10-09 09:04:48,039 - INFO - Finished converting document test_empty.html in 0.00 sec.
2025-10-09 09:04:48,040 - WARNING - Parameter `strict_text` has been deprecated and will be ignored.
2025-10-09 09:04:48,040 - INFO - üîç Starting LangExtract call: Extract legal events from this document. For each event, you must return exactly four JSON keys:

1. "event_particulars" - REQUIRED: Provide a complete description (2-8 sentences as appropriate) of what happened, including relevant context, parties involved, procedural background, implications, and any important details. Use verbatim or paraphrased text from the document. NEVER leave this field empty.
2. "citation" - Exact legal authority cited in the event (statute, rule, case, docket, etc.). Copy the verbatim reference from the document. Use empty string "" when no explicit legal citation appears.
3. "document_reference" - Leave as empty string "" (will be filled automatically with source filename)
4. "date" - Specific date mentioned (use empty string "" if no date is found)

CRITICAL REQUIREMENTS:
- "event_particulars" must ALWAYS contain meaningful, comprehensive text - provide a full description with sufficient context for legal analysis
- Use 2-8 sentences as appropriate to capture the complete legal significance and context of each event
- Include relevant background, procedural details, party information, and implications when available in the document
- Use empty strings ("") for missing values EXCEPT for "event_particulars" which must never be empty
- The "citation" field should only contain actual legal references mentioned in the text
- Always use empty string "" for "document_reference" - the system will populate it with the correct filename
- Return all four keys for every extraction

PROHIBITION: Never return an extraction with blank or empty "event_particulars" - every event must have a comprehensive, contextual description.

Extract all legally significant events, proceedings, filings, agreements, and deadlines.
2025-10-09 09:04:48,040 - INFO - üìù Text length: 96 chars
2025-10-09 09:04:48,040 - INFO - üéØ Examples: 3
2025-10-09 09:04:48,044 - WARNING - Prompt alignment: FAILED to align: [example#0] class='legal_filing' status=None text='Plaintiff filed motion to dismiss on January 15, 2024'
2025-10-09 09:04:48,044 - WARNING - Prompt alignment: non-exact match: [example#1] class='contract_execution' status=AlignmentStatus.MATCH_LESSER text='Contract execution between ABC Corp and XYZ LLC on March 3, 2023' char_span=(4, 12)
2025-10-09 09:04:48,044 - WARNING - Both GOOGLE_API_KEY and GEMINI_API_KEY are set. Using GOOGLE_API_KEY.
2025-10-09 09:04:48,117 - INFO - Starting document annotation.
‚úÖ PASS AC-008: Sequential numbering in No column
[94m[1mLangExtract[0m: model=[92mgemini-2.0-flash[0m [00:00]2025-10-09 09:04:48,118 - INFO - Processing batch 0 with length 1
2025-10-09 09:04:48,118 - INFO - AFC is enabled with max remote calls: 10.
2025-10-09 09:04:49,572 - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent "HTTP/1.1 200 OK"
2025-10-09 09:04:49,573 - INFO - AFC remote call 1 is done.
2025-10-09 09:04:49,573 - INFO - Starting resolver process for input text.
2025-10-09 09:04:49,573 - INFO - Starting to extract and order extractions from data.
2025-10-09 09:04:49,573 - INFO - Completed extraction and ordering of extractions.
2025-10-09 09:04:49,574 - INFO - Starting alignment process for provided chunk text.
[94m[1mLangExtract[0m: model=[92mgemini-2.0-flash[0m [00:01][94m[1mLangExtract[0m: model=[92mgemini-2.0-flash[0m [00:01]
2025-10-09 09:04:49,574 - INFO - Finalizing annotation for document ID doc_996a0a95.
2025-10-09 09:04:49,574 - INFO - Document annotation completed.
2025-10-09 09:04:49,576 - INFO - ‚úÖ LangExtract call successful
2025-10-09 09:04:49,576 - WARNING - ‚ö†Ô∏è No events extracted from test_empty.html
2025-10-09 09:04:49,576 - INFO - ‚è±Ô∏è  test_empty.html: Docling=0.004s, Extractor=1.536s, Total=1.539s
2025-10-09 09:04:49,576 - INFO - ‚úÖ Extracted 1 events from test_empty.html using adapters
2025-10-09 09:04:49,578 - INFO - ‚úÖ Normalized 1 records to standard format
2025-10-09 09:04:49,579 - INFO - ‚úÖ Pipeline completed successfully with 1 legal events [Pipeline-ID: DL2-LE1-TS1-F-20251009090448]
2025-10-09 09:04:49,580 - INFO - detected formats: [<InputFormat.HTML: 'html'>]
2025-10-09 09:04:49,581 - INFO - Going to convert document batch...
2025-10-09 09:04:49,581 - INFO - Processing document test_large.html
2025-10-09 09:04:49,582 - INFO - Finished converting document test_large.html in 0.00 sec.
2025-10-09 09:04:49,586 - INFO - ‚úÖ DOCLING SUCCESS: test_large.html
2025-10-09 09:04:49,586 - INFO - detected formats: [<InputFormat.HTML: 'html'>]
2025-10-09 09:04:49,587 - INFO - Going to convert document batch...
2025-10-09 09:04:49,587 - INFO - Processing document test_large.html
2025-10-09 09:04:49,588 - INFO - Finished converting document test_large.html in 0.00 sec.
2025-10-09 09:04:49,590 - WARNING - Parameter `strict_text` has been deprecated and will be ignored.
2025-10-09 09:04:49,590 - INFO - üîç Starting LangExtract call: Extract legal events from this document. For each event, you must return exactly four JSON keys:

1. "event_particulars" - REQUIRED: Provide a complete description (2-8 sentences as appropriate) of what happened, including relevant context, parties involved, procedural background, implications, and any important details. Use verbatim or paraphrased text from the document. NEVER leave this field empty.
2. "citation" - Exact legal authority cited in the event (statute, rule, case, docket, etc.). Copy the verbatim reference from the document. Use empty string "" when no explicit legal citation appears.
3. "document_reference" - Leave as empty string "" (will be filled automatically with source filename)
4. "date" - Specific date mentioned (use empty string "" if no date is found)

CRITICAL REQUIREMENTS:
- "event_particulars" must ALWAYS contain meaningful, comprehensive text - provide a full description with sufficient context for legal analysis
- Use 2-8 sentences as appropriate to capture the complete legal significance and context of each event
- Include relevant background, procedural details, party information, and implications when available in the document
- Use empty strings ("") for missing values EXCEPT for "event_particulars" which must never be empty
- The "citation" field should only contain actual legal references mentioned in the text
- Always use empty string "" for "document_reference" - the system will populate it with the correct filename
- Return all four keys for every extraction

PROHIBITION: Never return an extraction with blank or empty "event_particulars" - every event must have a comprehensive, contextual description.

Extract all legally significant events, proceedings, filings, agreements, and deadlines.
2025-10-09 09:04:49,590 - INFO - üìù Text length: 554 chars
2025-10-09 09:04:49,590 - INFO - üéØ Examples: 3
2025-10-09 09:04:49,594 - WARNING - Prompt alignment: FAILED to align: [example#0] class='legal_filing' status=None text='Plaintiff filed motion to dismiss on January 15, 2024'
2025-10-09 09:04:49,594 - WARNING - Prompt alignment: non-exact match: [example#1] class='contract_execution' status=AlignmentStatus.MATCH_LESSER text='Contract execution between ABC Corp and XYZ LLC on March 3, 2023' char_span=(4, 12)
2025-10-09 09:04:49,594 - WARNING - Both GOOGLE_API_KEY and GEMINI_API_KEY are set. Using GOOGLE_API_KEY.
2025-10-09 09:04:49,667 - INFO - Starting document annotation.
‚ùå FAIL AC-015: Empty document handling with fallback table
   Details: Fallback table has incorrect structure: ['No', 'Date', 'Event Particulars', 'Citation', 'Document Reference', 'Docling_Seconds', 'Extractor_Seconds', 'Total_Seconds']
[94m[1mLangExtract[0m: model=[92mgemini-2.0-flash[0m [00:00]2025-10-09 09:04:49,668 - INFO - Processing batch 0 with length 1
2025-10-09 09:04:49,669 - INFO - AFC is enabled with max remote calls: 10.
2025-10-09 09:05:00,124 - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent "HTTP/1.1 200 OK"
2025-10-09 09:05:00,126 - INFO - AFC remote call 1 is done.
2025-10-09 09:05:00,126 - INFO - Starting resolver process for input text.
2025-10-09 09:05:00,126 - INFO - Starting to extract and order extractions from data.
2025-10-09 09:05:00,126 - INFO - Completed extraction and ordering of extractions.
2025-10-09 09:05:00,126 - INFO - Starting alignment process for provided chunk text.
2025-10-09 09:05:00,372 - INFO - Completed alignment process for the provided source_text.
[94m[1mLangExtract[0m: model=[92mgemini-2.0-flash[0m [00:10][94m[1mLangExtract[0m: model=[92mgemini-2.0-flash[0m [00:10]
2025-10-09 09:05:00,372 - INFO - Finalizing annotation for document ID doc_7501a5d7.
2025-10-09 09:05:00,372 - INFO - Document annotation completed.
2025-10-09 09:05:00,374 - INFO - ‚úÖ LangExtract call successful
2025-10-09 09:05:00,374 - INFO - ‚úÖ Extracted 10 legal events from test_large.html
2025-10-09 09:05:00,374 - INFO - ‚è±Ô∏è  test_large.html: Docling=0.010s, Extractor=10.783s, Total=10.794s
2025-10-09 09:05:00,374 - INFO - ‚úÖ Extracted 10 events from test_large.html using adapters
2025-10-09 09:05:00,376 - INFO - ‚úÖ Normalized 10 records to standard format
2025-10-09 09:05:00,377 - INFO - ‚úÖ Pipeline completed successfully with 10 legal events [Pipeline-ID: DL2-LE1-TS1-F-20251009090449]
‚ùå FAIL AC-017: Large document processing performance
   Details: Processing took 10.80s (> 10s limit)

============================================================
üèÅ TEST RESULTS SUMMARY
============================================================
Total Tests: 8
‚úÖ Passed: 6
‚ùå Failed: 2
Success Rate: 75.0%

‚ùå FAILED TESTS:
  AC-015: Empty document handling with fallback table
    ‚Üí Fallback table has incorrect structure: ['No', 'Date', 'Event Particulars', 'Citation', 'Document Reference', 'Docling_Seconds', 'Extractor_Seconds', 'Total_Seconds']
  AC-017: Large document processing performance
    ‚Üí Processing took 10.80s (> 10s limit)

============================================================
‚ö° SKIPPING PERFORMANCE TESTS (Quick Mode)

================================================================================
üèÜ EXECUTIVE SUMMARY - 5-COLUMN LEGAL EVENTS TABLE VALIDATION
================================================================================

üìä OVERALL RESULTS:
   Status: ACCEPTABLE
   Total Tests: 8
   ‚úÖ Passed: 6
   ‚ùå Failed: 2
   Success Rate: 75.0%

üß™ ACCEPTANCE CRITERIA:
   Tests: 8
   Success Rate: 75.0%
   Failed: AC-015, AC-017

üí° RECOMMENDATION:
   Several issues require attention

‚ö†Ô∏è  ‚ùå REQUIRES ATTENTION BEFORE DEPLOYMENT

================================================================================

üìÑ Detailed test report saved: /Users/aks/docling_langextract_testing/tests/test_report_20251009_090500.json

üèÅ Test suite completed with exit code: 1
